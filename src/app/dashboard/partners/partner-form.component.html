<h2 md-dialog-title>Detalles de usuario {{ data.member.nombre }}</h2>
<md-dialog-content>
    <!-- <form class="partner-form"> -->
        <md-select *ngIf="!data.member.is('empleado')" placeholder="Tipo de Miembro" [(ngModel)]="data.member.tipo" class="full-width form-group">
            <md-option *ngFor="let memberKind of memberKinds" [value]="memberKind.value">{{ memberKind.name }}</md-option>
        </md-select>

        <md-form-field class="full-width">
            <input mdInput placeholder="Nombre" [(ngModel)]="data.member.nombre">
        </md-form-field>
        <md-form-field class="full-width">
            <input mdInput placeholder="Telefono" [(ngModel)]="data.member.data.telefono">
        </md-form-field>

        <md-form-field class="full-width">
            <input mdInput placeholder="Email" [(ngModel)]="data.member.data.email">
        </md-form-field>

        <md-form-field class="full-width">
            <input mdInput placeholder="Dirección" [(ngModel)]="data.member.data.direccion">
        </md-form-field>

        <md-select placeholder="Tipo de sangre" [(ngModel)]="data.member.data.tipo_sangre" class="full-width">
            <md-option *ngFor="let bloodKind of bloodKinds" [value]="bloodKind">{{ bloodKind }}</md-option>
        </md-select>

        <md-form-field class="full-width">
            <input mdInput placeholder="RFID" [(ngModel)]="data.member.info.rfid" type="password">
        </md-form-field>

        <md-form-field class="full-width">
            <input mdInput placeholder="Codigo" [(ngModel)]="data.member.info.code">
        </md-form-field>

        <!-- <p>Huella dactilar</p> -->
        <div *ngIf="data.member.info.fmd != ''" class="form-group">
            <em>Ya hay una huella resgistrada para este usuario. &nbsp;</em>
            <!-- <button md-raised-button color="warn" (click)="deleteFMD(data.member.id)">Eliminar huella</button> -->
        </div>
        <div *ngIf="data.member.info.fmd == ''" class="form-group">
            <em>No hay huella resgistrada para este usuario aún. &nbsp;</em>
        </div>

        <md-select placeholder="Tipo de membresía" [(ngModel)]="data.member.data.tipo_membresia" class="full-width">
            <md-option *ngFor="let subscriptionKind of subscriptionKinds" [value]="subscriptionKind">{{ subscriptionKind }}</md-option>
        </md-select>

        <md-form-field class="full-width">
          <input mdInput [mdDatepicker]="picker" placeholder="Fecha de nacimiento">
          <md-datepicker-toggle mdSuffix [for]="picker"></md-datepicker-toggle>
          <md-datepicker touchUi="true" #picker></md-datepicker>
        </md-form-field>

        <div *ngIf="data.member.is('titular')">
            <h2 class="mat-h2">Pagos</h2>
            <div *ngIf="lastPayment">
                <table class="table mat-elevation-z8">
                    <tr>
                        <th>Pagado hasta</th>
                        <th>Cantidad</th>
                        <th>Fecha del pago</th>
                    </tr>
                    <tr>
                        <td>{{ lastPayment.paid_up | date:'medium' }} </td>
                        <td>{{ lastPayment.paid_amount | currency:'MXN':true }}</td>
                        <td>{{ lastPayment.payment_date | date:'medium' }}</td>
                    </tr>
                </table>
                <form [formGroup]="paymentForm" (ngSubmit)="doPayment()" novalidate>
                    <div class="row">
                        <div class="col-md-4">
                            <md-form-field class="full-width">
                                <input mdInput placeholder="Pagado hasta" type="text" formControlName="paid_up" [formGroup]="paymentForm" [mdDatepicker]="paidUpPicker">
                                <md-datepicker-toggle mdSuffix [for]="paidUpPicker"></md-datepicker-toggle>
                                 <md-datepicker touchUi="true" #paidUpPicker></md-datepicker>
                            </md-form-field>
                        </div>
                        <div class="col-md-4">
                            <md-form-field class="full-width">
                                <input mdInput placeholder="Cantidad" type="number" formControlName="paid_amount" [formGroup]="paymentForm">
                            </md-form-field>
                        </div>
                        <div class="col-md-4">
                            <button md-raised-button color="primary">Registrar pago</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <br>
        <!-- MÓDULO DE ASOCIADOS  -->
        <div *ngIf="data.member.is('titular')">
            <h2 class="mat-h2">Asociados</h2>
            <div *ngIf="data.member.assoc.length > 0">
                <table class="table mat-elevation-z8">
                    <tr>
                        <th>No. Credencial</th>
                        <th>Nombre</th>
                        <th>Acciones</th>
                    </tr>
                    <tr *ngFor="let member of data.member.assoc">
                        <td>{{ member.data.code }}</td>
                        <td>{{ member.nombre }}</td>
                        <td><button md-raised-button (click)="setData(member.id)" color="primary">Editar <md-icon class="md-24">edit</md-icon></button></td>
                    </tr>
                </table>
            </div>
            <div *ngIf="data.member.assoc.length == 0">
                <em>Este miembro no tiene asociados registrados. &nbsp;</em>
            </div>
        </div>
        <div *ngIf="data.member.is('asociado') && data.member.father?.id">
            <h2 class="mat-h2">Usuario referenciado</h2>
            <table class="table mat-elevation-z8">
                <tr>
                    <th>No. Credencial</th>
                    <th>Nombre</th>
                    <th>Acciones</th>
                </tr>
                <tr>
                    <td>{{ data.member.father.data.code }}</td>
                    <td>{{ data.member.father.nombre }}</td>
                    <td><button md-raised-button (click)="setData(data.member.father.id)" color="primary">Editar <md-icon class="md-24">edit</md-icon></button></td>
                </tr>
            </table>
        </div>
        <div *ngIf="data.member.father == null">
            <h2 class="mat-h2">Usuario referenciado</h2>
            <form class="example-form">
      <md-form-field class="example-full-width">
        <input mdInput placeholder="State" aria-label="State" [mdAutocomplete]="auto" [formControl]="stateCtrl">
        <md-autocomplete #auto="mdAutocomplete">
          <md-option *ngFor="let state of filteredStates | async" [value]="state.name">
            <img style="vertical-align:middle;" aria-hidden src="{{state.flag}}" height="25" />
            <span>{{ state.name }}</span> |
            <small>Population: {{state.population}}</small>
          </md-option>
        </md-autocomplete>
      </md-form-field>

      <br />

      <md-slide-toggle
        [checked]="stateCtrl.disabled"
        (change)="stateCtrl.disabled ? stateCtrl.enable() : stateCtrl.disable()">
        Disable Input?
      </md-slide-toggle>
    </form>
        </div>

        <br>
        <!-- <h2 class="mat-h2">Expediente</h2>
        <md-list>
          <md-list-item *ngFor="let file of files">
            <md-icon md-list-icon>note</md-icon>
            <h4 md-line>{{file.name}}</h4>
            <p md-line> {{file.updated | date}} </p>
        </md-list-item><s></s>
        </md-list>
        <br> -->
    <!-- </form> -->
</md-dialog-content>
<md-dialog-actions>
  <button md-button md-dialog-close>Cancelar</button>
  <!-- Can optionally provide a result for the closing dialog. -->
  <button md-button [md-dialog-close]="true" color="primary">Aceptar</button>
</md-dialog-actions>
