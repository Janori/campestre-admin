<h2 md-dialog-title>Detalles de usuario {{ data.member.nombre }}</h2>
<md-dialog-content>
    <!-- <form class="partner-form"> -->
        <md-select placeholder="Tipo de Miembro" [(ngModel)]="data.member.tipo" class="full-width form-group">
            <md-option *ngFor="let memberKind of memberKinds" [value]="memberKind.value">{{ memberKind.name }}</md-option>
        </md-select>

        <md-form-field class="full-width">
            <input mdInput placeholder="Nombre" [(ngModel)]="data.member.nombre">
        </md-form-field>
        <md-form-field class="full-width">
            <input mdInput placeholder="Telefono" [(ngModel)]="data.member.data.telefono">
        </md-form-field>

        <md-form-field class="full-width">
            <input mdInput placeholder="Email" [(ngModel)]="data.member.data.email">
        </md-form-field>

        <md-form-field class="full-width">
            <input mdInput placeholder="Dirección" [(ngModel)]="data.member.data.direccion">
        </md-form-field>

        <md-select placeholder="Tipo de sangre" [(ngModel)]="data.member.data.tipo_sangre" class="full-width">
            <md-option *ngFor="let bloodKind of bloodKinds" [value]="bloodKind">{{ bloodKind }}</md-option>
        </md-select>

        <md-form-field class="full-width">
            <input mdInput placeholder="RFID" [(ngModel)]="data.member.info.rfid" type="password">
        </md-form-field>

        <md-form-field class="full-width">
            <input mdInput placeholder="Codigo" [(ngModel)]="data.member.info.code">
        </md-form-field>

        <!-- <p>Huella dactilar</p> -->
        <div *ngIf="data.member.info.fmd != ''" class="form-group">
            <em>Ya hay una huella resgistrada para este usuario. &nbsp;</em>
            <button md-raised-button color="warn" (click)="deleteFMD(data.member.id)">Eliminar huella</button>
        </div>
        <div *ngIf="data.member.info.fmd == ''" class="form-group">
            <em>No hay huella resgistrada para este usuario aún. &nbsp;</em>
        </div>

        <md-select placeholder="Tipo de membresía" [(ngModel)]="data.member.data.tipo_membresia" class="full-width">
            <md-option *ngFor="let subscriptionKind of subscriptionKinds" [value]="subscriptionKind">{{ subscriptionKind }}</md-option>
        </md-select>

        <md-form-field class="full-width">
          <input mdInput [mdDatepicker]="picker" placeholder="Fecha de nacimiento">
          <md-datepicker-toggle mdSuffix [for]="picker"></md-datepicker-toggle>
          <md-datepicker touchUi="true" #picker></md-datepicker>
        </md-form-field>

        <div>
            <h2 class="mat-h2">Pagos</h2>
            <div class="example-container mat-elevation-z8">
                <md-table [dataSource]="historialDataSource">
                    <ng-container mdColumnDef="month">
                        <md-header-cell *mdHeaderCellDef> Mes </md-header-cell>
                        <md-cell *mdCellDef="let element"> {{element.month}} </md-cell>
                    </ng-container>

                    <ng-container mdColumnDef="amount">
                        <md-header-cell *mdHeaderCellDef> Cantidad </md-header-cell>
                        <md-cell *mdCellDef="let element"> {{element.amount | currency:'MXN':true }} </md-cell>
                    </ng-container>

                    <ng-container mdColumnDef="status">
                        <md-header-cell *mdHeaderCellDef> Estado </md-header-cell>
                        <md-cell *mdCellDef="let element">
                            <div *ngIf="element.status == 'Pendiente'">
                                <button md-raised-button>Pagar</button>
                            </div>
                            <div *ngIf="element.status != 'Pendiente'">
                                {{ element.status }}
                            </div>
                        </md-cell>
                    </ng-container>

                    <md-header-row *mdHeaderRowDef="historialdisplayedColumns"></md-header-row>
                    <md-row *mdRowDef="let row; columns: historialdisplayedColumns;"></md-row>
              </md-table>
        </div>
        <br>
        <!-- MÓDULO DE ASOCIADOS  -->
        <div *ngIf="data.member.is('titular')">
            <h2 class="mat-h2">Asociados</h2>
            <div *ngIf="data.member.assoc.length > 0">
                <table class="table mat-elevation-z8">
                    <tr>
                        <th>No. Credencial</th>
                        <th>Nombre</th>
                        <th>Acciones</th>
                    </tr>
                    <tr *ngFor="let member of data.member.assoc">
                        <td>{{ member.data.code }}</td>
                        <td>{{ member.nombre }}</td>
                        <td><button md-raised-button (click)="setData(member.id)" color="primary">Editar <md-icon class="md-24">edit</md-icon></button></td>
                    </tr>
                </table>
            </div>
            <div *ngIf="data.member.assoc.length == 0">
                <em>Este miembro no tiene asociados registrados. &nbsp;</em>
            </div>
        </div>
        <div *ngIf="data.member.is('asociado') && data.member.father?.id">
            <h2 class="mat-h2">Usuario referenciado</h2>
            <table class="table mat-elevation-z8">
                <tr>
                    <th>No. Credencial</th>
                    <th>Nombre</th>
                    <th>Acciones</th>
                </tr>
                <tr>
                    <td>{{ data.member.father.data.code }}</td>
                    <td>{{ data.member.father.nombre }}</td>
                    <td><button md-raised-button (click)="setData(data.member.father.id)" color="primary">Editar <md-icon class="md-24">edit</md-icon></button></td>
                </tr>
            </table>
        </div>

            <br>
            <h2 class="mat-h2">Expediente</h2>
            <md-list>
              <md-list-item *ngFor="let file of files">
                <md-icon md-list-icon>note</md-icon>
                <h4 md-line>{{file.name}}</h4>
                <p md-line> {{file.updated | date}} </p>
            </md-list-item><s></s>
            </md-list>
            <br>
        </div>
    <!-- </form> -->
</md-dialog-content>
<md-dialog-actions>
  <button md-button md-dialog-close>Cancelar</button>
  <!-- Can optionally provide a result for the closing dialog. -->
  <button md-button [md-dialog-close]="true" color="primary">Aceptar</button>
</md-dialog-actions>
